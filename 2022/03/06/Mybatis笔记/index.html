<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Mybatis笔记 | Sigmund Freud</title>
  <meta name="keywords" content="">
  <meta name="description" content="Mybatis笔记 | Sigmund Freud">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick">
<meta property="og:type" content="article">
<meta property="og:title" content="Hello World">
<meta property="og:url" content="http://504py.top/2022/08/21/hello-world/index.html">
<meta property="og:site_name" content="Sigmund Freud">
<meta property="og:description" content="Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-08-21T04:29:49.954Z">
<meta property="article:modified_time" content="2022-08-23T10:31:45.588Z">
<meta property="article:author" content="Sigmund Freud">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 6.2.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="//" class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>Sigmund Freud</span>
</div>

<div class="icon">
    <iframe frameborder="no" bmarginwidth="0" marginheight="0" width=280 height=86 src="//music.163.com/outchain/player?type=2&id=31365604&auto=1&height=66"></iframe>

    
        
            <a title="rss" href="/atom.xml" target="_blank">
                
                        <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-rss"></use>
                    </svg>
                        
            </a>
            
                
        
            <a title="github" href="https://github.com/yelog" target="_blank">
                
                        <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                        
            </a>
            
                
        
            <a title="csdn" href="https://blog.csdn.net/m0_47194818?spm=1000.2115.3001.5343" target="_blank">
                
                        <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-csdn"></use>
                    </svg>
                        
            </a>
            
                
        
            <a title="email" href="mailto:2193489834@qq.com" target="_blank">
                
                        <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                        
            </a>
            
                
        
            <a title="qq" href="http://wpa.qq.com/msgrd?v=3&uin=2193489834&site=qq&menu=yes" target="_blank">
                
                        <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-qq"></use>
                    </svg>
                        
            </a>
            
                
        
            <a title="kugou" href="https://www.kugou.com/" target="_blank">
                
                        <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-kugou"></use>
                    </svg>
                        
            </a>
            
                
        
            <a title="neteasemusic" href="https://music.163.com/" target="_blank">
                
                        <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-neteasemusic"></use>
                    </svg>
                        
            </a>
            
                
</div>

    
        
                
                    <ul>
                        <li>
                            <div class="all active" data-rel="全部文章">
                                全部文章
                                    
                                        <small>(14)</small>
                                        
                            </div>
                        </li>
                        
                    </ul>
                    <div class="left-bottom">
                        <div class="menus">
                            
                                
                        </div>
                        <div>
                            
                                <a class="about  hasFriend  site_url" 
               href="/about">关于</a>
                                
                                    <a style="width: 50%"
                
                                           class="friends">友链</a>
                                        
                        </div>
                    </div>
                    <input type="hidden" id="yelog_site_posts_number" value="14">
                    
                            <div style="display: none">
                                <span id="busuanzi_value_site_uv"></span>
                                <span id="busuanzi_value_site_pv"></span>
                            </div>
    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">叶落阁</a></li>
            
            <li><a target="_blank" href="https://mp.weixin.qq.com/s?__biz=Mzg4NTYwODk0NQ==&mid=2247483938&idx=1&sn=77e8b19ca8f6983ae4130bfcec021bba&chksm=cfa71abcf8d093aa7e9909783f9a9f6a077e34fc13b780f056f2acabe235816c9499923fc1e2#rd">公众号-OCA分享</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        
        <a  class="全部文章 "
           href="/2022/08/21/hello-world/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Hello World">Hello World</span>
            <span class="post-date" title="2022-08-21 12:29:49">2022/08/21</span>
        </a>
        
        
        <a  class="全部文章 "
           href="/2022/07/02/dubbo%E5%88%86%E5%B8%83%E5%BC%8F/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="dubbo分布式">dubbo分布式</span>
            <span class="post-date" title="2022-07-02 20:30:23">2022/07/02</span>
        </a>
        
        
        <a  class="全部文章 "
           href="/2022/06/22/java%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="java学习方法">java学习方法</span>
            <span class="post-date" title="2022-06-22 22:07:02">2022/06/22</span>
        </a>
        
        
        <a  class="全部文章 "
           href="/2022/06/22/Netty%EF%BC%88%E5%8F%AA%E5%81%9A%E4%BA%86%E8%A7%A3%E5%8E%9F%E7%90%86%EF%BC%8C%E6%80%9D%E6%83%B3%EF%BC%89/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="netty入门">netty入门</span>
            <span class="post-date" title="2022-06-22 20:20:40">2022/06/22</span>
        </a>
        
        
        <a  class="全部文章 "
           href="/2022/06/16/Nginx%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="nginx入门">nginx入门</span>
            <span class="post-date" title="2022-06-16 14:39:30">2022/06/16</span>
        </a>
        
        
        <a  class="全部文章 "
           href="/2022/05/01/RabbitMQ%E7%AC%94%E8%AE%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="rabbitmq入门">rabbitmq入门</span>
            <span class="post-date" title="2022-05-01 16:24:56">2022/05/01</span>
        </a>
        
        
        <a  class="全部文章 "
           href="/2022/04/27/Redis6%E7%AC%94%E8%AE%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="reids入门">reids入门</span>
            <span class="post-date" title="2022-04-27 14:48:11">2022/04/27</span>
        </a>
        
        
        <a  class="全部文章 "
           href="/2022/04/21/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Java设计模式">Java设计模式</span>
            <span class="post-date" title="2022-04-21 18:39:36">2022/04/21</span>
        </a>
        
        
        <a  class="全部文章 "
           href="/2022/03/23/Linux%E7%AC%94%E8%AE%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="linux笔记">linux笔记</span>
            <span class="post-date" title="2022-03-23 14:27:37">2022/03/23</span>
        </a>
        
        
        <a  class="全部文章 "
           href="/2022/03/18/git-learn/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="git learn">git learn</span>
            <span class="post-date" title="2022-03-18 18:29:49">2022/03/18</span>
        </a>
        
        
        <a  class="全部文章 "
           href="/2022/03/12/SpringBoot%E7%AC%94%E8%AE%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="SpringBoot笔记">SpringBoot笔记</span>
            <span class="post-date" title="2022-03-12 19:21:11">2022/03/12</span>
        </a>
        
        
        <a  class="全部文章 "
           href="/2022/03/10/MybatisPlus%E7%AC%94%E8%AE%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="MYbatisplus笔记">MYbatisplus笔记</span>
            <span class="post-date" title="2022-03-10 17:46:10">2022/03/10</span>
        </a>
        
        
        <a  class="全部文章 "
           href="/2022/03/06/Mybatis%E7%AC%94%E8%AE%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Mybatis笔记">Mybatis笔记</span>
            <span class="post-date" title="2022-03-06 19:21:28">2022/03/06</span>
        </a>
        
        
        <a  class="全部文章 "
           href="/2021/12/05/MySQL%E7%9A%84%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="mysql笔记">mysql笔记</span>
            <span class="post-date" title="2021-12-05 17:16:02">2021/12/05</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-Mybatis笔记" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">Mybatis笔记</h1>
    
    <div class="article-meta">
        
        
        
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2022-08-23 18:31:37'>2022-03-06 19:21</time>
        
    </div>
    <div class="article-meta">
        
        
        <span id="busuanzi_container_page_pv">
            阅读 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Mybatis%E7%AC%94%E8%AE%B0"><span class="toc-text">Mybatis笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Mybatis%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-text">Mybatis的特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAmaven%E5%B7%A5%E7%A8%8B"><span class="toc-text">创建maven工程</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%89%93%E5%8C%85%E6%96%B9%E5%BC%8F%EF%BC%9Ajar%E5%8C%85"><span class="toc-text">1.打包方式：jar包</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AEmybais-config-xml%E6%96%87%E4%BB%B6"><span class="toc-text">2.配置mybais-config.xml文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%88%9B%E5%BB%BAmapper%E6%8E%A5%E5%8F%A3%EF%BC%8C%E5%AF%B9%E5%BA%94%E7%9A%84%E5%AE%9E%E4%BD%93%E7%B1%BB%E3%80%82"><span class="toc-text">3.创建mapper接口，对应的实体类。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E5%88%9B%E5%BB%BA%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6"><span class="toc-text">4.创建映射文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#log4j"><span class="toc-text">log4j</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CRUD%E6%B5%8B%E8%AF%95"><span class="toc-text">CRUD测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">核心配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B5%B7%E5%88%AB%E5%90%8D"><span class="toc-text">起别名</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BD%93%E9%9C%80%E8%A6%81%E5%BC%95%E5%85%A5%E5%A4%9A%E4%B8%AA%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E6%97%B6%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%94%BE%E5%8C%85%E9%87%8C%EF%BC%8C%E7%84%B6%E5%90%8E%E8%AE%BF%E9%97%AE"><span class="toc-text">当需要引入多个映射文件时，可以放包里，然后访问</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%86%E8%AF%A5%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AE%BE%E7%BD%AE%E6%88%90%E4%B8%BA%E6%A8%A1%E6%9D%BF"><span class="toc-text">将该核心配置文件设置成为模板</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mybatis%E8%8E%B7%E5%8F%96%E5%8F%82%E6%95%B0%E5%80%BC-%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"><span class="toc-text">Mybatis获取参数值 的两种方式（重点）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%A0%E9%80%92%E5%8D%95%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%88%E6%A0%B9%E6%8D%AE%E7%94%A8%E6%88%B7%E5%90%8D%E6%9D%A5%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF"><span class="toc-text">传递单个参数（根据用户名来获取用户信息)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%A0%E9%80%92%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0"><span class="toc-text">传递多个参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8A%E4%B8%80%E4%B8%AA%E5%8E%9F%E7%90%86%EF%BC%88%E4%BC%A0%E9%80%92%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%89"><span class="toc-text">上一个原理（传递多个参数）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mybatis%E7%9A%84%E5%90%84%E7%A7%8D%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD"><span class="toc-text">Mybatis的各种查询功能</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%8D%95%E4%B8%AA%E6%A0%B9%E6%8D%AEid%E5%92%8C%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E7%9A%84%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%EF%BC%8C%E8%BF%94%E5%9B%9E%E7%9A%84%E6%98%AF%E5%B1%9E%E6%80%A7%EF%BC%8C%E5%B1%9E%E6%80%A7%E5%80%BC"><span class="toc-text">查询单个根据id和查询所有的用户信息，返回的是属性，属性值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%8D%95%E8%A1%8C%E5%8D%95%E5%88%97%E7%9A%84%E6%83%85%E5%86%B5"><span class="toc-text">查询单行单列的情况</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%8D%95%E4%B8%AA%E4%BF%A1%E6%81%AF%E6%A0%B9%E6%8D%AEid%EF%BC%8C%E8%BF%94%E5%9B%9Emap%E9%9B%86%E5%90%88%E5%AF%B9%E8%B1%A1"><span class="toc-text">查询单个信息根据id，返回map集合对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E7%9A%84%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%EF%BC%8C%E8%BF%94%E5%9B%9Emap%E9%9B%86%E5%90%88"><span class="toc-text">查询所有的用户信息，返回map集合</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-text">模糊查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4"><span class="toc-text">批量删除</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%8C%87%E5%AE%9A%E8%A1%A8%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-text">查询指定表的信息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%87%AA%E5%A2%9E%E7%9A%84%E4%B8%BB%E9%94%AE"><span class="toc-text">获取自增的主键</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%98%A0%E5%B0%84ResultMap"><span class="toc-text">自定义映射ResultMap</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%80%EF%BC%8C%E5%AD%97%E6%AE%B5%E5%90%8D%E4%B8%8E%E5%B1%9E%E6%80%A7%E5%90%8D%E4%B8%8D%E4%B8%80%E8%87%B4%E6%97%B6"><span class="toc-text">一，字段名与属性名不一致时</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8C%EF%BC%8C%E5%A4%9A%E5%AF%B9%E4%B8%80%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB"><span class="toc-text">二，多对一映射关系</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%80%EF%BC%9A%E7%BA%A7%E8%81%94%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC"><span class="toc-text">方式一：级联属性赋值</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%BA%8C%EF%BC%9Aassociation%EF%BC%9A%E5%A4%84%E7%90%86%E5%A4%9A%E5%AF%B9%E4%B8%80%E7%9A%84%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB"><span class="toc-text">方式二：association：处理多对一的映射关系</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%89%EF%BC%9A%E5%88%86%E6%AD%A5%E6%9F%A5%E8%AF%A2"><span class="toc-text">方式三：分步查询</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD"><span class="toc-text">延迟加载</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%89%EF%BC%8C%E4%B8%80%E5%AF%B9%E5%A4%9A%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB"><span class="toc-text">三，一对多映射关系</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%EF%BC%8Ccollection"><span class="toc-text">1，collection</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%EF%BC%8C%E5%88%86%E6%AD%A5%E6%9F%A5%E8%AF%A2"><span class="toc-text">2，分步查询</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81sql"><span class="toc-text">动态sql</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%EF%BC%8Cif"><span class="toc-text">1，if:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-where"><span class="toc-text">2,where :</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%EF%BC%8Ctrim"><span class="toc-text">3，trim :</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%EF%BC%8C-%E4%BC%A0%E9%80%92%E4%B8%80%E4%B8%AA%E6%95%B0%E7%BB%84%E5%AE%9E%E7%8E%B0%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4"><span class="toc-text">4， 传递一个数组实现批量删除</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-collection%E5%AE%9E%E7%8E%B0%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0"><span class="toc-text">5.collection实现批量添加</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-sql%E6%A0%87%E7%AD%BE"><span class="toc-text">6.sql标签</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mybatis%E7%BC%93%E5%AD%98%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94-%E6%9F%A5%E8%AF%A2%E6%9C%89%E6%95%88"><span class="toc-text">mybatis缓存—————————-查询有效</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98%EF%BC%88%E9%BB%98%E8%AE%A4%E5%BC%80%E5%90%AF%EF%BC%89"><span class="toc-text">一级缓存（默认开启）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-text">二级缓存</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98%E7%9A%84%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE"><span class="toc-text">二级缓存的相关配置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Mybatis%E7%BC%93%E5%AD%98%E7%9A%84%E6%9F%A5%E8%AF%A2%E7%9A%84%E9%A1%BA%E5%BA%8F"><span class="toc-text">Mybatis缓存的查询的顺序</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mybatis%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B"><span class="toc-text">Mybatis逆向工程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E9%A1%B5"><span class="toc-text">分页</span></a></li></ol></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Mybatis笔记"><a href="#Mybatis笔记" class="headerlink" title="Mybatis笔记"></a>Mybatis笔记</h1><p>三层对应的处理框架<br>界面层—servlet—springmvc (框架)</p>
<p>业务逻辑层—service类–spring(框架)</p>
<p>数据访问层—dao类–mybatis(框架）</p>
<h3 id="Mybatis的特性"><a href="#Mybatis的特性" class="headerlink" title="Mybatis的特性"></a>Mybatis的特性</h3><ol>
<li>MyBatis是支持定制化SQL、存储过程以及高级映射的优秀的持久层框架，MyBatis避免了几乎所有的JDBC代码和手动设置参数以及获取结果集</li>
<li>MyBatis可以使用简单的XML或注解用于配置和原始映射，将接口和Java的POJO(Plain Old Java Objects，普通的Java对象）映射成数据库中的记录</li>
<li>MyBatis是—个半自动的ORM (Object Relation Mapping)框架</li>
</ol>
<h3 id="创建maven工程"><a href="#创建maven工程" class="headerlink" title="创建maven工程"></a>创建maven工程</h3><h5 id="1-打包方式：jar包"><a href="#1-打包方式：jar包" class="headerlink" title="1.打包方式：jar包"></a>1.打包方式：jar包</h5><h5 id="2-配置mybais-config-xml文件"><a href="#2-配置mybais-config-xml文件" class="headerlink" title="2.配置mybais-config.xml文件"></a>2.配置mybais-config.xml文件</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">        PUBLIC <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="line">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;environments <span class="keyword">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span><br><span class="line">        &lt;environment id=<span class="string">&quot;development&quot;</span>&gt;</span><br><span class="line">            &lt;transactionManager type=<span class="string">&quot;JDBC&quot;</span>/&gt;</span><br><span class="line">            &lt;dataSource type=<span class="string">&quot;POOLED&quot;</span>&gt;</span><br><span class="line">                &lt;property name=<span class="string">&quot;driver&quot;</span> value=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span><br><span class="line">                &lt;property name=<span class="string">&quot;url&quot;</span> value=<span class="string">&quot;jdbc:mysql://localhost:3306/book&quot;</span>/&gt;</span><br><span class="line">                &lt;property name=<span class="string">&quot;username&quot;</span> value=<span class="string">&quot;root&quot;</span>/&gt;</span><br><span class="line">                &lt;property name=<span class="string">&quot;password&quot;</span> value=<span class="string">&quot;yz&quot;</span>/&gt;</span><br><span class="line">            &lt;/dataSource&gt;</span><br><span class="line">        &lt;/environment&gt;</span><br><span class="line">    &lt;/environments&gt;</span><br><span class="line">    &lt;!--创建映射关系--&gt;</span><br><span class="line">    &lt;mappers&gt;</span><br><span class="line">        &lt;mapper resource=<span class="string">&quot;org/mybatis/example/BlogMapper.xml&quot;</span>/&gt;</span><br><span class="line">    &lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>

<h5 id="3-创建mapper接口，对应的实体类。"><a href="#3-创建mapper接口，对应的实体类。" class="headerlink" title="3.创建mapper接口，对应的实体类。"></a>3.创建mapper接口，对应的实体类。</h5><h5 id="4-创建映射文件"><a href="#4-创建映射文件" class="headerlink" title="4.创建映射文件"></a>4.创建映射文件</h5><p>1、映射文件的命名规则:<br>表所对应的实体类的类名+Mapper,xml<br>例如:表t_user，映射的实体类为User，所对应的映射文件为UserMapper.xml因此一个映射文件对应一个实体类，对应一张表的操作<br>MyBatis映射文件用于编写SQL，访问以及操作表中的数据<br>MyBatis映射文件存放的位置是src&#x2F;main&#x2F;resources&#x2F;mappers目录下</p>
<p>2、MyBatis中可以面向接口操作数据，要保证两个—致:<br>a&gt;mapper接口的全类名和映射文件的命名空间(namespace）保持─致</p>
<p>b&gt;mapper接口中方法的方法名和映射文件中编写SQL的标签的id属性保持─致</p>
<p> <img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220307145551332.png" alt="image-20220307145551332"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//UserMapper</span></span><br><span class="line"><span class="keyword">package</span> com.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * a&gt;mapper接口的全类名和映射文件的命名空间(namespace）保持─致</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * b&gt;mapper接口中方法的方法名和映射文件中编写SQL的标签的id属性保持一致</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//插入方法</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insertUser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Usermapper.xml</span></span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">        PUBLIC <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="line">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--namespace与Mapper接口路径保持一致--&gt;</span><br><span class="line">&lt;mapper namespace=<span class="string">&quot;com.mapper.UserMapper&quot;</span>&gt;</span><br><span class="line">    &lt;!--id与接口的抽象方法保持一致--&gt;</span><br><span class="line">    &lt;insert id=<span class="string">&quot;insertUser&quot;</span>&gt;</span><br><span class="line">        insert into t_user  <span class="title function_">values</span><span class="params">(<span class="literal">null</span>,<span class="string">&quot;Jack&quot;</span>,<span class="string">&quot;3321&quot;</span>,<span class="string">&quot;163@qq.com&quot;</span>)</span></span><br><span class="line">    &lt;/insert&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br><span class="line">    </span><br><span class="line">   <span class="comment">//核心配置文件</span></span><br><span class="line">    &lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">        PUBLIC <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="line">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;environments <span class="keyword">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span><br><span class="line">        &lt;environment id=<span class="string">&quot;development&quot;</span>&gt;</span><br><span class="line">            &lt;transactionManager type=<span class="string">&quot;JDBC&quot;</span>/&gt;</span><br><span class="line">            &lt;dataSource type=<span class="string">&quot;POOLED&quot;</span>&gt;</span><br><span class="line">                &lt;property name=<span class="string">&quot;driver&quot;</span> value=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span><br><span class="line">                &lt;property name=<span class="string">&quot;url&quot;</span> value=<span class="string">&quot;jdbc:mysql://localhost:3306/book&quot;</span>/&gt;</span><br><span class="line">                &lt;property name=<span class="string">&quot;username&quot;</span> value=<span class="string">&quot;root&quot;</span>/&gt;</span><br><span class="line">                &lt;property name=<span class="string">&quot;password&quot;</span> value=<span class="string">&quot;yz&quot;</span>/&gt;</span><br><span class="line">            &lt;/dataSource&gt;</span><br><span class="line">        &lt;/environment&gt;</span><br><span class="line">    &lt;/environments&gt;</span><br><span class="line">    &lt;!--创建映射关系-引入映射文件--&gt;</span><br><span class="line">    &lt;mappers&gt;</span><br><span class="line">        &lt;mapper resource=<span class="string">&quot;mapper/UserMapper.xml&quot;</span>/&gt;</span><br><span class="line">    &lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//Test</span></span><br><span class="line">    <span class="keyword">package</span> com.mybatis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//加载核心配置文件</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//获取Sqlsession对象</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(is);</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取mapper接口对象</span></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//调用insert抽象方法</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> mapper.insertUser();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//mybatis是需要自己进行事务提交的</span></span><br><span class="line">        <span class="comment">//手动提交</span></span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        System.out.println(<span class="string">&quot;result:&quot;</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>至此，入门结束。</p>
<h5 id="log4j"><a href="#log4j" class="headerlink" title="log4j"></a>log4j</h5><p>1，导入依赖</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;log4j&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;log4j&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">1.2</span><span class="number">.12</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>2.配置文件.xml</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220307153645351.png" alt="image-20220307153645351"></p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220307153711253.png" alt="image-20220307153711253"></p>
<h3 id="CRUD测试"><a href="#CRUD测试" class="headerlink" title="CRUD测试"></a>CRUD测试</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接口  </span></span><br><span class="line"><span class="comment">//插入方法</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insertUser</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    User <span class="title function_">queryUser</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询所有的用户信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">getAllUser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//UserMapper.xml</span></span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">        PUBLIC <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="line">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--namespace与Mapper接口路径保持一致--&gt;</span><br><span class="line">&lt;mapper namespace=<span class="string">&quot;com.mapper.UserMapper&quot;</span>&gt;</span><br><span class="line">    &lt;!--id与接口的抽象方法保持一致--&gt;</span><br><span class="line">    &lt;insert id=<span class="string">&quot;insertUser&quot;</span>&gt;</span><br><span class="line">        insert into t_user  <span class="title function_">values</span><span class="params">(<span class="literal">null</span>,<span class="string">&quot;Alan&quot;</span>,<span class="string">&quot;123455&quot;</span>,<span class="string">&quot;163@qq.com&quot;</span>)</span></span><br><span class="line">    &lt;/insert&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>;--&gt;</span><br><span class="line">    &lt;update id=<span class="string">&quot;update&quot;</span>&gt;</span><br><span class="line">        update t_user <span class="type">set</span> <span class="variable">username</span> <span class="operator">=</span><span class="string">&quot;Tom&quot;</span> <span class="type">where</span> <span class="variable">id</span> <span class="operator">=</span> <span class="number">7</span></span><br><span class="line">    &lt;/update&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- */</span><br><span class="line">    User <span class="title function_">queryUser</span><span class="params">()</span>;--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;queryUser&quot;</span> resultType=<span class="string">&quot;com.pojo.User&quot;</span>&gt;</span><br><span class="line">        select * from t_user <span class="type">where</span> <span class="variable">id</span> <span class="operator">=</span> <span class="number">7</span></span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--List&lt;User&gt; <span class="title function_">getAllUser</span><span class="params">()</span>;--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;getAllUser&quot;</span> resultType=<span class="string">&quot;com.pojo.User&quot;</span>&gt;</span><br><span class="line">        select * from t_user</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//Test</span></span><br><span class="line">       <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">CRUD</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="comment">//mapper.update();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//查询某一用户的用户信息</span></span><br><span class="line">        <span class="comment">/*User user = mapper.queryUser();</span></span><br><span class="line"><span class="comment">        System.out.println(user);*/</span></span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; users = mapper.getAllUser();</span><br><span class="line">        users.forEach(user -&gt; System.out.println(user));</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">///没有删除</span></span><br></pre></td></tr></table></figure>

<h3 id="核心配置文件"><a href="#核心配置文件" class="headerlink" title="核心配置文件"></a>核心配置文件</h3><h5 id="起别名"><a href="#起别名" class="headerlink" title="起别名"></a>起别名</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;typeAliases&gt;</span><br><span class="line">    &lt;typeAlias type=<span class="string">&quot;com.pojo.User&quot;</span>&gt;&lt;/typeAlias&gt;</span><br><span class="line">&lt;/typeAliases&gt;</span><br></pre></td></tr></table></figure>

<h5 id="当需要引入多个映射文件时，可以放包里，然后访问"><a href="#当需要引入多个映射文件时，可以放包里，然后访问" class="headerlink" title="当需要引入多个映射文件时，可以放包里，然后访问"></a>当需要引入多个映射文件时，可以放包里，然后访问</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!---引入映射文件--&gt;</span><br><span class="line">&lt;mappers&gt;</span><br><span class="line">   &lt;!-- &lt;mapper resource=<span class="string">&quot;mapper/UserMapper.xml&quot;</span>/&gt;--&gt;</span><br><span class="line">    &lt;!--当需要引入多个映射文件时，可以导入包</span><br><span class="line">        需要两个条件：</span><br><span class="line">        <span class="number">1.</span>xml的包路径必须要与接口的包路径保持一致</span><br><span class="line">        <span class="number">2.</span>接口名必须要与映射文件名字一样</span><br><span class="line">        附：在resources里创建文件时，要以/做分割，如果以.的话只是一个文件名--&gt;</span><br><span class="line">    &lt;<span class="keyword">package</span> name=<span class="string">&quot;com.mapper&quot;</span>&gt;&lt;/<span class="keyword">package</span>&gt;</span><br><span class="line">&lt;/mappers&gt;</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220307184031011.png" alt="image-20220307184031011"></p>
<h5 id="将该核心配置文件设置成为模板"><a href="#将该核心配置文件设置成为模板" class="headerlink" title="将该核心配置文件设置成为模板"></a>将该核心配置文件设置成为模板</h5><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220307191608193.png" alt="image-20220307191608193" style="zoom:200%;" />

<h3 id="Mybatis获取参数值-的两种方式（重点）"><a href="#Mybatis获取参数值-的两种方式（重点）" class="headerlink" title="Mybatis获取参数值 的两种方式（重点）"></a>Mybatis获取参数值 的两种方式（重点）</h3><p>1.一种是${}  一种是#{}</p>
<p>2.${} 的本质是字符串拼接，#{} 的本质是占位符赋值。</p>
<h5 id="传递单个参数（根据用户名来获取用户信息"><a href="#传递单个参数（根据用户名来获取用户信息" class="headerlink" title="传递单个参数（根据用户名来获取用户信息)"></a>传递单个参数（根据用户名来获取用户信息)</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接口</span></span><br><span class="line"><span class="comment">//根据用户名来查询用户信息</span></span><br><span class="line">User <span class="title function_">getUserbyUsername</span><span class="params">(String username)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Usermapper.xml</span></span><br><span class="line">  &lt;!-- User <span class="title function_">getUserbyUsername</span><span class="params">(String username)</span>;--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;getUserbyUsername&quot;</span> resultType=<span class="string">&quot;User&quot;</span> &gt;</span><br><span class="line">        select * from t_user <span class="type">where</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&#x27;$&#123;username_&#125;&#x27;</span></span><br><span class="line">        select * from t_user <span class="type">where</span> <span class="variable">username</span> <span class="operator">=</span> #&#123;username_&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">        </span><br><span class="line"><span class="comment">//Test</span></span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">CRUD</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionutils.getSqlSession();</span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">       </span><br><span class="line">        <span class="type">User</span> <span class="variable">alan</span> <span class="operator">=</span> mapper.getUserbyUsername(<span class="string">&quot;Alan&quot;</span>);</span><br><span class="line">        System.out.println(alan);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h5 id="传递多个参数"><a href="#传递多个参数" class="headerlink" title="传递多个参数"></a>传递多个参数</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接口</span></span><br><span class="line"><span class="comment">//传递多个参数时，可以验证账号密码</span></span><br><span class="line">User <span class="title function_">checkloginin</span><span class="params">(String username,String password)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Usermapper.xml</span></span><br><span class="line"> &lt;!--  User <span class="title function_">checkloginin</span><span class="params">(String username,String password)</span>;</span><br><span class="line">            注意：Mybatis是以arg0，arg1，param0，param1的方式存取的，把参数放在map集合里，</span><br><span class="line">            所以sql语句里必须要在&#123;&#125;里写上键（arg0。。。）的方式，传入参数</span><br><span class="line">            <span class="number">2.</span>两种sql语句的写法：</span><br><span class="line">            select * from t_user where username= #&#123;arg0&#125; and password= #&#123;arg1&#125;</span><br><span class="line">             select * from t_user where username= <span class="string">&#x27;$&#123;arg0&#125;&#x27;</span> and password= <span class="string">&#x27;$&#123;arg1&#125;&#x27;</span>--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;checkloginin&quot;</span> resultType=<span class="string">&quot;User&quot;</span>&gt;</span><br><span class="line">        select * from t_user where username= <span class="string">&#x27;$&#123;arg0&#125;&#x27;</span> and password= <span class="string">&#x27;$&#123;arg1&#125;&#x27;</span></span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">                 </span><br><span class="line"><span class="comment">//Test</span></span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">CRUD</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionutils.getSqlSession();</span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        </span><br><span class="line">        <span class="type">User</span> <span class="variable">tom</span> <span class="operator">=</span> mapper.checkloginin(<span class="string">&quot;Tom&quot;</span>, <span class="string">&quot;3321&quot;</span>);</span><br><span class="line">        System.out.println(tom);</span><br></pre></td></tr></table></figure>

<h5 id="上一个原理（传递多个参数）"><a href="#上一个原理（传递多个参数）" class="headerlink" title="上一个原理（传递多个参数）"></a>上一个原理（传递多个参数）</h5><blockquote>
<p>多参数时，mybatis是帮我们创建一个map集合来存放需要传递的参数，现在我们来自己创建一个map集合来实现多参数传递。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接口</span></span><br><span class="line">User <span class="title function_">checkloginbyMap</span><span class="params">(Map&lt;String, Object&gt; map)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Usermapper.xml</span></span><br><span class="line"> &lt;!--User <span class="title function_">checkloginbyMap</span><span class="params">(Map&lt;String, Object&gt; map)</span>;--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;checkloginbyMap&quot;</span> resultType=<span class="string">&quot;User&quot;</span>&gt;</span><br><span class="line">        select * from t_user <span class="type">where</span> <span class="variable">username</span> <span class="operator">=</span> #&#123;username&#125; <span class="type">and</span> <span class="variable">password</span> <span class="operator">=</span> #&#123;password&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">        </span><br><span class="line"><span class="comment">//Test</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">CRUD</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionutils.getSqlSession();</span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;Tom&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;password&quot;</span>,<span class="number">3321</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> mapper.checkloginbyMap(map);</span><br><span class="line">        System.out.println(user);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="Mybatis的各种查询功能"><a href="#Mybatis的各种查询功能" class="headerlink" title="Mybatis的各种查询功能"></a>Mybatis的各种查询功能</h3><h5 id="查询单个根据id和查询所有的用户信息，返回的是属性，属性值"><a href="#查询单个根据id和查询所有的用户信息，返回的是属性，属性值" class="headerlink" title="查询单个根据id和查询所有的用户信息，返回的是属性，属性值"></a>查询单个根据id和查询所有的用户信息，返回的是属性，属性值</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SelectMapper</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询某一个用户的信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    User <span class="title function_">getUserById</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * 查询所有的用户xx</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">getAllUser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//SelectMapper.xml</span></span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">        PUBLIC <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="line">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--namespace与Mapper接口路径保持一致--&gt;</span><br><span class="line">&lt;mapper namespace=<span class="string">&quot;com.mapper.SelectMapper&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--<span class="keyword">void</span> <span class="title function_">getUserById</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> Integer id)</span>;--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;getUserById&quot;</span> resultType=<span class="string">&quot;User&quot;</span>&gt;</span><br><span class="line">        select * from t_user <span class="type">where</span> <span class="variable">id</span> <span class="operator">=</span> #&#123;id&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--List&lt;User&gt; <span class="title function_">getAllUser</span><span class="params">()</span>;--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;getAllUser&quot;</span> resultType=<span class="string">&quot;User&quot;</span>&gt;</span><br><span class="line">        select * from t_user</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/mapper&gt;</span><br><span class="line">        </span><br><span class="line"><span class="comment">//Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SelectTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectOne</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionutils.getSqlSession();</span><br><span class="line">        <span class="type">SelectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(SelectMapper.class);</span><br><span class="line">        <span class="type">User</span> <span class="variable">userById</span> <span class="operator">=</span> mapper.getUserById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(userById);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询所有的用户信息</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getAll</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionutils.getSqlSession();</span><br><span class="line">        <span class="type">SelectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(SelectMapper.class);</span><br><span class="line">        List&lt;User&gt; allUser = mapper.getAllUser();</span><br><span class="line">        allUser.forEach(User-&gt; System.out.println(User));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="查询单行单列的情况"><a href="#查询单行单列的情况" class="headerlink" title="查询单行单列的情况"></a>查询单行单列的情况</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取单行单列的信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Integer <span class="title function_">getCount</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//xml</span></span><br><span class="line"><span class="comment">//注意：这里的resultType返回值本来是，java.lang.Integer</span></span><br><span class="line"><span class="comment">//亻是mybatis有自己的别名，如下表，</span></span><br><span class="line">    &lt;!--Integer <span class="title function_">getCount</span><span class="params">()</span>;--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;getCount&quot;</span> resultType=<span class="string">&quot;int&quot;</span>&gt;</span><br><span class="line">        select <span class="title function_">count</span><span class="params">(*)</span> from t_user</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">        </span><br><span class="line"> <span class="comment">//查询单行单列的信息</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getCount</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionutils.getSqlSession();</span><br><span class="line">        <span class="type">SelectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(SelectMapper.class);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> mapper.getCount();</span><br><span class="line">        System.out.println(count);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220309071056859.png" alt="image-20220309071056859"></p>
<h5 id="查询单个信息根据id，返回map集合对象"><a href="#查询单个信息根据id，返回map集合对象" class="headerlink" title="查询单个信息根据id，返回map集合对象"></a>查询单个信息根据id，返回map集合对象</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接口</span></span><br><span class="line">Map&lt;String,Object&gt; <span class="title function_">getUserByIdToMap</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> Integer id)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//xml</span></span><br><span class="line">&lt;select id=<span class="string">&quot;getUserByIdToMap&quot;</span> resultType=<span class="string">&quot;map&quot;</span>&gt;</span><br><span class="line">        select * from t_user <span class="type">where</span> <span class="variable">id</span> <span class="operator">=</span> #&#123;id&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">        </span><br><span class="line"><span class="comment">//Test</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectOne</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionutils.getSqlSession();</span><br><span class="line">        <span class="type">SelectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(SelectMapper.class);</span><br><span class="line">        <span class="type">Map</span> <span class="variable">userById</span> <span class="operator">=</span> mapper.getUserByIdToMap(<span class="number">1</span>);</span><br><span class="line">        System.out.println(userById);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h5 id="查询所有的用户信息，返回map集合"><a href="#查询所有的用户信息，返回map集合" class="headerlink" title="查询所有的用户信息，返回map集合"></a>查询所有的用户信息，返回map集合</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一种方法</span></span><br><span class="line"><span class="comment">//接口</span></span><br><span class="line">List&lt;Map&lt;String,Object&gt; &gt;getUserByIdToMap(<span class="meta">@Param(&quot;id&quot;)</span> Integer id);</span><br><span class="line"></span><br><span class="line"><span class="comment">//第二种方法，用注解MapKey来将id设置成为键，其余作为值</span></span><br><span class="line"><span class="comment">//接口</span></span><br><span class="line">    <span class="meta">@MapKey(&quot;id&quot;)</span></span><br><span class="line">    Map&lt;String,Object&gt; <span class="title function_">getUserByIdToMap</span><span class="params">()</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h5><p>xml如下</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220309083829658.png" alt="image-20220309083829658"></p>
<h5 id="批量删除"><a href="#批量删除" class="headerlink" title="批量删除"></a>批量删除</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 批量删除</span></span><br><span class="line"><span class="comment">     *注意：1，sql语句的写法。2，不能使用#&#123;&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">、<span class="comment">//接口</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">removemore</span><span class="params">(<span class="meta">@Param(&quot;ids&quot;)</span> String ids)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//xml</span></span><br><span class="line">    &lt;mapper namespace=<span class="string">&quot;com.mapper.DeleteMapper&quot;</span>&gt;</span><br><span class="line">   &lt;!-- <span class="type">int</span> <span class="title function_">removemore</span><span class="params">(<span class="meta">@Param(&quot;ids&quot;)</span> String ids)</span>;--&gt;</span><br><span class="line">    &lt;delete id=<span class="string">&quot;removemore&quot;</span> &gt;</span><br><span class="line">        delete from t_user where id <span class="title function_">in</span> <span class="params">($&#123;ids&#125;)</span></span><br><span class="line">    &lt;/delete&gt;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeleteTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteTest</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionutils.getSqlSession();</span><br><span class="line">        <span class="type">DeleteMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(DeleteMapper.class);</span><br><span class="line">        <span class="type">int</span> <span class="variable">removemore</span> <span class="operator">=</span> mapper.removemore(<span class="string">&quot;1,3&quot;</span>);</span><br><span class="line">        System.out.println(removemore);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="查询指定表的信息"><a href="#查询指定表的信息" class="headerlink" title="查询指定表的信息"></a>查询指定表的信息</h5><p>注意：不能使用#{}</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询指定表的所有信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">getUserByTablename</span><span class="params">(<span class="meta">@Param(&quot;tablename&quot;)</span> String tablename)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//xml</span></span><br><span class="line"> &lt;!-- List&lt;User&gt; <span class="title function_">getUserByTablename</span><span class="params">(<span class="meta">@Param(&quot;tablename&quot;)</span> String tablename)</span>;--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;getUserByTablename&quot;</span> resultType=<span class="string">&quot;User&quot;</span>&gt;</span><br><span class="line">        select *from $&#123;tablename&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">    </span><br><span class="line">        </span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">queryByTablename</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionutils.getSqlSession();</span><br><span class="line">        <span class="type">SelectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(SelectMapper.class);</span><br><span class="line">        List&lt;User&gt; list = mapper.getUserByTablename(<span class="string">&quot;t_user&quot;</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h5 id="获取自增的主键"><a href="#获取自增的主键" class="headerlink" title="获取自增的主键"></a>获取自增的主键</h5><p>xml</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- <span class="type">int</span> <span class="title function_">insertUser</span><span class="params">(User user)</span>;</span><br><span class="line">-useGeneratedKeys表示是否用了自增</span><br><span class="line">keyProperty表示用传递的参数（user中的id）来表示获取id--&gt;</span><br><span class="line">&lt;insert id=<span class="string">&quot;insertUsers&quot;</span> useGeneratedKeys=<span class="string">&quot;true&quot;</span> keyProperty=<span class="string">&quot;id&quot;</span>&gt;</span><br><span class="line">    insert into t_user <span class="title function_">values</span><span class="params">(<span class="literal">null</span>,#&#123;username&#125;,#&#123;password&#125;,#&#123;email&#125;)</span></span><br><span class="line">&lt;/insert&gt;</span><br></pre></td></tr></table></figure>

<h3 id="自定义映射ResultMap"><a href="#自定义映射ResultMap" class="headerlink" title="自定义映射ResultMap"></a>自定义映射ResultMap</h3><h5 id="一，字段名与属性名不一致时"><a href="#一，字段名与属性名不一致时" class="headerlink" title="一，字段名与属性名不一致时"></a>一，字段名与属性名不一致时</h5><p>第一种方法：.在sql语句里，为字段名起个别名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--  List&lt;Emp&gt;  <span class="title function_">getAllEmp</span><span class="params">()</span>;--&gt;</span><br><span class="line">&lt;select id=<span class="string">&quot;getAllEmp&quot;</span> resultType=<span class="string">&quot;Emp&quot;</span>&gt;</span><br><span class="line">    select eid id,ename name,eage age,email,did from t_emp</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>第二种方方法:全局配置mybatis-config.xml<img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220309130614421.png" alt="image-20220309130614421"></p>
<p>第三种方式：ResultMap来配置映射关系</p>
<p>注意：Result id 对应的是resultMap，type是实体类类型，result id是对应的主键，result property对应的是属性名，column对应的是字段名。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap id=<span class="string">&quot;EmpresultMap&quot;</span> type=<span class="string">&quot;Emp&quot;</span>&gt;</span><br><span class="line">    &lt;id property=<span class="string">&quot;id&quot;</span> column=<span class="string">&quot;eid&quot;</span>/&gt;</span><br><span class="line">    &lt;result property=<span class="string">&quot;name&quot;</span> column=<span class="string">&quot;ename&quot;</span>/&gt;</span><br><span class="line">    &lt;result property=<span class="string">&quot;age&quot;</span> column=<span class="string">&quot;eage&quot;</span>/&gt;</span><br><span class="line">    &lt;result property=<span class="string">&quot;email&quot;</span> column=<span class="string">&quot;email&quot;</span>/&gt;</span><br><span class="line">    &lt;result property=<span class="string">&quot;did&quot;</span> column=<span class="string">&quot;did&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--  List&lt;Emp&gt;  <span class="title function_">getAllEmp</span><span class="params">()</span>;--&gt;</span><br><span class="line">&lt;select id=<span class="string">&quot;getAllEmp&quot;</span> resultMap=<span class="string">&quot;EmpresultMap&quot;</span>&gt;</span><br><span class="line">    select * from t_emp</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h5 id="二，多对一映射关系"><a href="#二，多对一映射关系" class="headerlink" title="二，多对一映射关系"></a>二，多对一映射关系</h5><h6 id="方式一：级联属性赋值"><a href="#方式一：级联属性赋值" class="headerlink" title="方式一：级联属性赋值"></a>方式一：级联属性赋值</h6><p> <img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220309141141016.png" alt="image-20220309141141016"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接口</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询员工以及和员工部门的信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Emp <span class="title function_">getEmpAndDept</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//xml</span></span><br><span class="line">&lt;resultMap id=<span class="string">&quot;getEmpAndDeptone&quot;</span> type=<span class="string">&quot;Emp&quot;</span>&gt;</span><br><span class="line">    &lt;id property=<span class="string">&quot;id&quot;</span> column=<span class="string">&quot;eid&quot;</span>/&gt;</span><br><span class="line">    &lt;result property=<span class="string">&quot;name&quot;</span> column=<span class="string">&quot;ename&quot;</span>/&gt;</span><br><span class="line">    &lt;result property=<span class="string">&quot;age&quot;</span> column=<span class="string">&quot;eage&quot;</span>/&gt;</span><br><span class="line">    &lt;result property=<span class="string">&quot;email&quot;</span> column=<span class="string">&quot;email&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;result property=<span class="string">&quot;dept.did&quot;</span> column=<span class="string">&quot;did&quot;</span>/&gt;</span><br><span class="line">    &lt;result property=<span class="string">&quot;dept.name&quot;</span> column=<span class="string">&quot;d_name&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line">&lt;!-- Emp <span class="title function_">getEmpAndDept</span><span class="params">(<span class="type">int</span> id)</span>;--&gt;</span><br><span class="line">&lt;select id=<span class="string">&quot;getEmpAndDept&quot;</span> resultMap=<span class="string">&quot;getEmpAndDeptone&quot;</span>&gt;</span><br><span class="line">    SELECT  * FROM t_emp,t_dept where t_emp.eid = t_dept.did and t_emp.eid=#&#123;id&#125;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line">    </span><br><span class="line"><span class="comment">///Test</span></span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testgetEmpAndDept</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionutils.getSqlSession();</span><br><span class="line">        <span class="type">EmpMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(EmpMapper.class);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">empAndDept</span> <span class="operator">=</span> mapper.getEmpAndDept(<span class="number">2</span>);</span><br><span class="line">        System.out.println(empAndDept);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h6 id="方式二：association：处理多对一的映射关系"><a href="#方式二：association：处理多对一的映射关系" class="headerlink" title="方式二：association：处理多对一的映射关系"></a>方式二：association：处理多对一的映射关系</h6><p>​				property:需要处理多对的映射关系的属性名</p>
<p>​				javaType:该属性的类型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="comment">//如下：只是将方式一的xml小改了一下</span></span><br><span class="line">&lt;resultMap id=<span class="string">&quot;getEmpAndDeptone&quot;</span> type=<span class="string">&quot;Emp&quot;</span>&gt;</span><br><span class="line">        &lt;id property=<span class="string">&quot;id&quot;</span> column=<span class="string">&quot;eid&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;name&quot;</span> column=<span class="string">&quot;ename&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;age&quot;</span> column=<span class="string">&quot;eage&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;email&quot;</span> column=<span class="string">&quot;email&quot;</span>/&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">        &lt;result property=<span class="string">&quot;dept.did&quot;</span> column=<span class="string">&quot;did&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;dept.name&quot;</span> column=<span class="string">&quot;d_name&quot;</span>/&gt;--&gt;</span><br><span class="line">        &lt;association property=<span class="string">&quot;dept&quot;</span> javaType=<span class="string">&quot;Dept&quot;</span>&gt;</span><br><span class="line">            &lt;id property=<span class="string">&quot;did&quot;</span> column=<span class="string">&quot;did&quot;</span>/&gt;</span><br><span class="line">            &lt;result property=<span class="string">&quot;name&quot;</span> column=<span class="string">&quot;d_name&quot;</span>/&gt;</span><br><span class="line">        &lt;/association&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line">    &lt;!-- Emp <span class="title function_">getEmpAndDept</span><span class="params">(<span class="type">int</span> id)</span>;--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;getEmpAndDept&quot;</span> resultMap=<span class="string">&quot;getEmpAndDeptone&quot;</span>&gt;</span><br><span class="line">        SELECT  * FROM t_emp,t_dept where t_emp.eid = t_dept.did and t_emp.eid=#&#123;id&#125;</span><br><span class="line">    &lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h6 id="方式三：分步查询"><a href="#方式三：分步查询" class="headerlink" title="方式三：分步查询"></a>方式三：分步查询</h6><p>select:设置分步查询的sqL的唯一标识(namespace.sQLId或mapper接口的全类名.方法名)</p>
<p>column:设置分布查询的条件</p>
<p>DeptMapper.xml</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">        PUBLIC <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="line">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--namespace与Mapper接口路径保持一致--&gt;</span><br><span class="line">&lt;mapper namespace=<span class="string">&quot;com.mapper.DeptMapper&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;resultMap id=<span class="string">&quot;getAllResult&quot;</span> type=<span class="string">&quot;Dept&quot;</span>&gt;</span><br><span class="line">        &lt;id property=<span class="string">&quot;did&quot;</span> column=<span class="string">&quot;did&quot;</span>&gt;&lt;/id&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;name&quot;</span> column=<span class="string">&quot;d_name&quot;</span>/&gt;</span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line">    &lt;!--   Dept <span class="title function_">getAll</span><span class="params">(<span class="type">int</span> did)</span>;--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;getAll&quot;</span> resultMap=<span class="string">&quot;getAllResult&quot;</span>&gt;</span><br><span class="line">        select * from t_dept <span class="type">where</span> <span class="variable">did</span> <span class="operator">=</span>#&#123;did&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">    </span><br><span class="line"> </span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">        PUBLIC <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="line">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--namespace与Mapper接口路径保持一致--&gt;</span><br><span class="line">&lt;mapper namespace=<span class="string">&quot;com.mapper.EmpMapper&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;resultMap id=<span class="string">&quot;EmpresultMap&quot;</span> type=<span class="string">&quot;Emp&quot;</span>&gt;</span><br><span class="line">        &lt;id property=<span class="string">&quot;id&quot;</span> column=<span class="string">&quot;eid&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;name&quot;</span> column=<span class="string">&quot;ename&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;age&quot;</span> column=<span class="string">&quot;eage&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;email&quot;</span> column=<span class="string">&quot;email&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;did&quot;</span> column=<span class="string">&quot;did&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--  List&lt;Emp&gt;  <span class="title function_">getAllEmp</span><span class="params">()</span>;--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;getAllEmp&quot;</span> resultMap=<span class="string">&quot;EmpresultMap&quot;</span>&gt;</span><br><span class="line">        select * from t_emp</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;resultMap id=<span class="string">&quot;getEmpAndDeptByStep&quot;</span> type=<span class="string">&quot;Emp&quot;</span>&gt;</span><br><span class="line">        &lt;id property=<span class="string">&quot;id&quot;</span> column=<span class="string">&quot;eid&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;name&quot;</span> column=<span class="string">&quot;ename&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;age&quot;</span> column=<span class="string">&quot;eage&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;email&quot;</span> column=<span class="string">&quot;email&quot;</span>/&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">        &lt;result property=<span class="string">&quot;dept.did&quot;</span> column=<span class="string">&quot;did&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;dept.name&quot;</span> column=<span class="string">&quot;d_name&quot;</span>/&gt;--&gt;</span><br><span class="line">        &lt;!--&lt;association property=<span class="string">&quot;dept&quot;</span> javaType=<span class="string">&quot;Dept&quot;</span>&gt;</span><br><span class="line">            &lt;id property=<span class="string">&quot;did&quot;</span> column=<span class="string">&quot;did&quot;</span>/&gt;</span><br><span class="line">            &lt;result property=<span class="string">&quot;name&quot;</span> column=<span class="string">&quot;d_name&quot;</span>/&gt;</span><br><span class="line">        &lt;/association&gt;--&gt;</span><br><span class="line">        &lt;association property=<span class="string">&quot;dept&quot;</span></span><br><span class="line">                     select=<span class="string">&quot;com.mapper.DeptMapper.getAll&quot;</span></span><br><span class="line">                     column=<span class="string">&quot;did&quot;</span>&gt;&lt;/association&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line">    &lt;!-- Emp <span class="title function_">getEmpAndDept</span><span class="params">(<span class="type">int</span> id)</span>;--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;getEmpAndDept1&quot;</span> resultMap=<span class="string">&quot;getEmpAndDeptByStep&quot;</span>&gt;</span><br><span class="line">       select * from t_emp <span class="type">where</span> <span class="variable">eid</span> <span class="operator">=</span> #&#123;idd&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">    </span><br><span class="line"> </span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<p>EmpMapper.xml</p>
<h5 id="延迟加载"><a href="#延迟加载" class="headerlink" title="延迟加载"></a>延迟加载</h5><blockquote>
<p>分步查询的优点:可以实现延迟加载，但是必须在核心配置文件中设置全局配置信息:</p>
<p>lazyLoadingEnabled:延迟加载的全局开关。当开启时，所有关联对象都会延迟加载</p>
<p> aggressiveLazyLoading:当开启时，任何方法的调用都会加载该对象的所有属性。否则，每个属性会按需加载</p>
<p>此时就可以实现按需加载，获取的数据是什么，就只会执行相应的sql。此时可通过association和collection中的fetchType属性设置当前的分步查询是否使用延迟加载，fetchType&#x3D;”lazy(延迟加载)&#x2F;eager(立即加载)”</p>
</blockquote>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220309153644104.png" alt="image-20220309153644104"></p>
<h5 id="三，一对多映射关系"><a href="#三，一对多映射关系" class="headerlink" title="三，一对多映射关系"></a>三，一对多映射关系</h5><h6 id="1，collection"><a href="#1，collection" class="headerlink" title="1，collection"></a>1，collection</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//DeptMapper.xml</span></span><br><span class="line">&lt;resultMap id=<span class="string">&quot;getDeptAndEmpREsultMap&quot;</span> type=<span class="string">&quot;Dept&quot;</span>&gt;</span><br><span class="line">        &lt;id property=<span class="string">&quot;did&quot;</span> column=<span class="string">&quot;did&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;name&quot;</span> column=<span class="string">&quot;d_name&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;collection property=<span class="string">&quot;emp&quot;</span> ofType=<span class="string">&quot;Emp&quot;</span>&gt;</span><br><span class="line">            &lt;id property=<span class="string">&quot;id&quot;</span> column=<span class="string">&quot;eid&quot;</span>/&gt;</span><br><span class="line">            &lt;result property=<span class="string">&quot;name&quot;</span> column=<span class="string">&quot;ename&quot;</span>/&gt;</span><br><span class="line">            &lt;result property=<span class="string">&quot;age&quot;</span> column=<span class="string">&quot;eage&quot;</span>/&gt;</span><br><span class="line">            &lt;result property=<span class="string">&quot;email&quot;</span> column=<span class="string">&quot;email&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/collection&gt;</span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line">&lt;!-- Dept <span class="title function_">getDeptAndEmp</span><span class="params">(<span class="meta">@Param(&quot;did&quot;)</span> <span class="type">int</span> did)</span>;--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;getDeptAndEmp&quot;</span> resultMap=<span class="string">&quot;getDeptAndEmpREsultMap&quot;</span>&gt;</span><br><span class="line">        select * from  t_dept left join t_emp on t_dept.did = t_emp.eid where t_dept.did = #&#123;did&#125;</span><br><span class="line">    &lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h6 id="2，分步查询"><a href="#2，分步查询" class="headerlink" title="2，分步查询"></a>2，分步查询</h6><p>关键代码如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//deptMapper.xml</span></span><br><span class="line">&lt;!-- Dept <span class="title function_">getDeptAndEmp</span><span class="params">(<span class="meta">@Param(&quot;did&quot;)</span> <span class="type">int</span> did)</span>;--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;getDeptAndEmp&quot;</span> resultMap=<span class="string">&quot;getDeptAndEmpREsultMap&quot;</span>&gt;</span><br><span class="line">        select * from  t_dept left join t_emp on t_dept.did = t_emp.eid where t_dept.did = #&#123;did&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;resultMap id=<span class="string">&quot;ByStepResultMap&quot;</span> type=<span class="string">&quot;Dept&quot;</span>&gt;</span><br><span class="line">        &lt;id property=<span class="string">&quot;did&quot;</span> column=<span class="string">&quot;did&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;name&quot;</span> column=<span class="string">&quot;d_name&quot;</span>/&gt;</span><br><span class="line">        &lt;collection property=<span class="string">&quot;emp&quot;</span></span><br><span class="line">                    select=<span class="string">&quot;com.mapper.EmpMapper.getAll&quot;</span></span><br><span class="line">                    column=<span class="string">&quot;did&quot;</span>&gt;</span><br><span class="line">        &lt;/collection&gt;</span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line">    &lt;!--Dept <span class="title function_">getDeptAndEmpByStep</span><span class="params">(<span class="meta">@Param(&quot;did&quot;)</span> <span class="type">int</span> did)</span>;--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;getDeptAndEmpByStep&quot;</span> resultMap=<span class="string">&quot;ByStepResultMap&quot;</span>&gt;</span><br><span class="line">        select *from t_dept <span class="type">where</span> <span class="variable">did</span> <span class="operator">=</span> #&#123;did&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//EmpMapper.xml</span></span><br><span class="line">            &lt;resultMap id=<span class="string">&quot;T&quot;</span> type=<span class="string">&quot;Emp&quot;</span>&gt;</span><br><span class="line">        &lt;id property=<span class="string">&quot;id&quot;</span> column=<span class="string">&quot;eid&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;name&quot;</span> column=<span class="string">&quot;ename&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;age&quot;</span> column=<span class="string">&quot;eage&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;email&quot;</span> column=<span class="string">&quot;email&quot;</span>/&gt;</span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line">    &lt;!--   List&lt;Emp&gt;  <span class="title function_">getAll</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> <span class="type">int</span> id)</span>;--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;getAll&quot;</span> resultMap=<span class="string">&quot;T&quot;</span>&gt;</span><br><span class="line">        select * from  t_emp <span class="type">where</span> <span class="variable">did</span> <span class="operator">=</span> #&#123;did&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220309184726613.png" alt="image-20220309184726613"></p>
<h3 id="动态sql"><a href="#动态sql" class="headerlink" title="动态sql"></a>动态sql</h3><h5 id="1，if"><a href="#1，if" class="headerlink" title="1，if:"></a>1，if:</h5><p>根据标签中test属性所对应的表达式决定标签中的内容是否需要拼接到SsQL中</p>
<h5 id="2-where"><a href="#2-where" class="headerlink" title="2,where :"></a>2,where :</h5><p><em>当where标签中有内容时，会自动生成where关键字，并且将内容前多余的and或or去掉</em>当where标签中没有内容时，此时where标签没有任何效果</p>
<p>*注意:where标签不能将其中内容后面多余的and或or去掉</p>
<h5 id="3，trim"><a href="#3，trim" class="headerlink" title="3，trim :"></a>3，trim :</h5><p>prefix&#x2F;suffix:将trim标签中内容前面或后面添加指定内容</p>
<p>suffixoverrides|prefixoverrides:将trim标签中内容前面或后面去掉指定内容</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">    &lt;!--    List&lt;Emp&gt; <span class="title function_">getEmpByChoose</span><span class="params">(Emp emp)</span>;--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;getEmpByChoose&quot;</span> resultMap=<span class="string">&quot;R&quot;</span>&gt;</span><br><span class="line">        select * from  t_emp</span><br><span class="line">&lt;where&gt;</span><br><span class="line">    &lt;choose&gt;</span><br><span class="line">        &lt;when test=<span class="string">&quot;id != null and id!= &#x27;&#x27;&quot;</span> &gt;</span><br><span class="line">            eid = #&#123;id&#125;</span><br><span class="line">        &lt;/when&gt;</span><br><span class="line">        &lt;when test=<span class="string">&quot;id != null and id!= &#x27;&#x27;&quot;</span> &gt;</span><br><span class="line">            ename = #&#123;id&#125;</span><br><span class="line">        &lt;/when&gt;</span><br><span class="line">        &lt;when test=<span class="string">&quot;id != null and id!= &#x27;&#x27;&quot;</span> &gt;</span><br><span class="line">            eage = #&#123;id&#125;</span><br><span class="line">        &lt;/when&gt;</span><br><span class="line">        &lt;when test=<span class="string">&quot;id != null and id!= &#x27;&#x27;&quot;</span> &gt;</span><br><span class="line">            email = #&#123;id&#125;</span><br><span class="line">        &lt;/when&gt;</span><br><span class="line"></span><br><span class="line">        &lt;otherwise&gt;</span><br><span class="line">            did = <span class="number">1</span></span><br><span class="line">        &lt;/otherwise&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/choose&gt;</span><br><span class="line">&lt;/where&gt;</span><br><span class="line">    &lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4，-传递一个数组实现批量删除"><a href="#4，-传递一个数组实现批量删除" class="headerlink" title="4， 传递一个数组实现批量删除"></a>4， 传递一个数组实现批量删除</h5><p>delete from t_emp where eid in( ?,?,?)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//接口</span></span><br><span class="line">Integer <span class="title function_">deleteByNums</span><span class="params">(<span class="meta">@Param(&quot;eids&quot;)</span> Integer[] nums)</span>;</span><br><span class="line"></span><br><span class="line">&lt;!--    Integer <span class="title function_">deleteByNums</span><span class="params">(Integer[] nums)</span>;--&gt;</span><br><span class="line">    &lt;delete id=<span class="string">&quot;deleteByNums&quot;</span>&gt;</span><br><span class="line">        delete from t_emp where eid in</span><br><span class="line">&lt;foreach collection=<span class="string">&quot;eids&quot;</span> item=<span class="string">&quot;eid&quot;</span> open=<span class="string">&quot;(&quot;</span> close=<span class="string">&quot;)&quot;</span> separator=<span class="string">&quot;,&quot;</span> &gt;</span><br><span class="line">    #&#123;eid&#125;</span><br><span class="line">&lt;/foreach&gt;</span><br><span class="line">    &lt;/delete&gt;</span><br></pre></td></tr></table></figure>

<p>delete from t_emp where eid &#x3D;? or eid &#x3D; ?</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220310134838442.png" alt="image-20220310134838442"></p>
<h5 id="5-collection实现批量添加"><a href="#5-collection实现批量添加" class="headerlink" title="5.collection实现批量添加"></a>5.collection实现批量添加</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * collection实现批量添加</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Integer <span class="title function_">indertBycollection</span><span class="params">(<span class="meta">@Param(&quot;emps&quot;)</span> List&lt;Emp&gt; emps)</span>;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    &lt;!-- Integer <span class="title function_">indertBycollection</span><span class="params">(List&lt;Emp&gt; emps)</span>;--&gt;</span><br><span class="line">    &lt;insert id=<span class="string">&quot;indertBycollection&quot;</span> &gt;</span><br><span class="line">        insert into t_emp values</span><br><span class="line">&lt;foreach collection=<span class="string">&quot;emps&quot;</span> item=<span class="string">&quot;emp&quot;</span> separator=<span class="string">&quot;,&quot;</span>&gt;</span><br><span class="line">    (<span class="literal">null</span>,#&#123;emp.name&#125;,#&#123;emp.age&#125;,#&#123;emp.email&#125;,<span class="literal">null</span>)</span><br><span class="line">&lt;/foreach&gt;</span><br><span class="line">    &lt;/insert&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testsql</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionutils.getSqlSession();</span><br><span class="line">    <span class="type">SqlMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(SqlMapper.class);</span><br><span class="line">    <span class="type">Emp</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="literal">null</span>, <span class="string">&quot;A&quot;</span>, <span class="number">19</span>, <span class="string">&quot;qq.com&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">    Emp b= <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="literal">null</span>, <span class="string">&quot;B&quot;</span>, <span class="number">14</span>, <span class="string">&quot;qq.com&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="type">Emp</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="literal">null</span>, <span class="string">&quot;C&quot;</span>, <span class="number">15</span>, <span class="string">&quot;qq.com&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">    List&lt;Emp&gt; list = Arrays.asList(a, b, c);</span><br><span class="line">    System.out.println(mapper.indertBycollection(list));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="6-sql标签"><a href="#6-sql标签" class="headerlink" title="6.sql标签"></a>6.sql标签</h5><p> <img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220310142610497.png" alt="image-20220310142610497"></p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220310142731371.png" alt="image-20220310142731371"></p>
<h3 id="mybatis缓存—————————-查询有效"><a href="#mybatis缓存—————————-查询有效" class="headerlink" title="mybatis缓存—————————-查询有效"></a>mybatis缓存—————————-查询有效</h3><h5 id="一级缓存（默认开启）"><a href="#一级缓存（默认开启）" class="headerlink" title="一级缓存（默认开启）"></a>一级缓存（默认开启）</h5><p>一级缓存是SqlSession级别的，通过同一个SqlSession查询的数据会被缓存，下次查询相同的数据，就会从缓存中直接获取，不会从数据库重新访问<br>使─级缓存失效的四种情况:<br>1)不同的SqlSession对应不同的—级缓存</p>
<p>2)同一个SqlSession但是查询条件不同<br>3)同一个SqlSession两次查询期间执行了任何一次增删改操作</p>
<p>4)同—个SalSession两次杳询期间手动清空了缓存</p>
<h5 id="二级缓存"><a href="#二级缓存" class="headerlink" title="二级缓存"></a>二级缓存</h5><p>2、MyBatis的二级缓存</p>
<p>二级缓存是SqlSessionFactory级别，通过 SqlSessionFactory创建的SqlSession查询的结果会被缓存;此后若再次执行相同的查询语句，结果就会从缓存中获取。</p>
<p>二级缓存开启的条件:<br>a&gt;在核心配置文件中，设置全局配置属性cacheEnabled&#x3D;”true”，默认为true，不需要设置</p>
<p>b&gt;在映射文件中设置标签<cache /></p>
<p>c&gt;二级缓存必须在SqlSession关闭或提交之后有效<br>d&gt;查询的数据所转换的实体类类型必须实现序列化的接口</p>
<p>使二级缓存失效的情况:<br>两次查询之间执行了任意的增删改，会使一级和二级缓存同时失效</p>
<h5 id="二级缓存的相关配置"><a href="#二级缓存的相关配置" class="headerlink" title="二级缓存的相关配置"></a>二级缓存的相关配置</h5><p>在mapper配置文件中添加的cache标签可以设置一些属性:<br>eviction属性:缓存回收策略<br>LRU (Least Recently Used)-最近最少使用的:移除最长时间不被使用的对象。FIFO (First in First out)-先进先出:按对象进入缓存的顺序来移除它们。<br>SOFT-软引用:移除基于垃圾回收器状态和软引用规则的对象。<br>WEAK–弱引用:更积极地移除基于垃圾收集器状态和弱引用规则的对象。默认的是 LRu。<br>. flushInterval属性:刷新间隔，单位毫秒<br>默认情况是不设置，也就是没有刷新间隔，缓存仅仅调用语句时刷新·</p>
<p> size属性:引用数目，正整数<br>代表缓存最多可以存储多少个对象，太大容易导致内存溢出. </p>
<p>readOnly属性:只读,true&#x2F;false</p>
<p>true:只读缓存;会给所有调用者返回缓存对象的相同实例。因此这些对象不能被修改。这提供了很重要的性能优势。</p>
<p>false:读写缓存;会返回缓存对象的拷贝（通过序列化)。这会慢一些，但是安全，因此默认是false。</p>
<h5 id="Mybatis缓存的查询的顺序"><a href="#Mybatis缓存的查询的顺序" class="headerlink" title="Mybatis缓存的查询的顺序"></a>Mybatis缓存的查询的顺序</h5><p>·先查询二级缓存，因为二级缓存中可能会有其他程序已经查出来的数据，可以拿来直接使用。·如果二级缓存没有命中，再查询—级缓存<br>·如果—级缓存也没有命中，则查询数据库<br>. SqlSession关闭之后，—级缓存中的数据会写入二级缓存</p>
<h3 id="Mybatis逆向工程"><a href="#Mybatis逆向工程" class="headerlink" title="Mybatis逆向工程"></a>Mybatis逆向工程</h3><p>·正向工程:先创建Java实体类，由框架负责根据实体类生成数据库表。Hibernate是支持正向工程的。</p>
<p>·逆向工程:先创建数据库表，由框架负责根据数据库表，反向生成如下资源:<br>o Java实体类<br>o Mapper接口</p>
<p>o Mapper映射文件</p>
<h3 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h3><p>*使用MyBatis的分页插件实现分页功能，需要在查询功能之前开启分页<br>rpageHeLper.startpage(int pageNum，int pagesize)</p>
<p>2、在查询功能之后获取分页相关信息<br>*Pageinfo<Emp> page &#x3D; new PageInfo&lt;&gt;(list，5）</p>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 2193489834@qq.com </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">赏</a>
</p>






    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2016-2020
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>喜欢就点赞,疼爱就打赏</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">支付宝</label></span><span><label><input type="radio" name="pay" value="weixin">微信</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
</style>







</html>
